---
import Memories from "../../layouts/Memories.astro";
---
<Memories title="iklett poslech" description="Otevřte poslech z učebnice na iklett">
    <main>
        <h1>Otevřít poslech z učebnice</h1>
        <p>
            Vyberte učebnici a zadejte číslo poslechu
        </p>
        <label for="book">Vyberte učebnici</label>
        <select id="book">
            <option value="138352">Aventura Nueva 1</option>
            <option value="159976">Aventura Nueva 2</option>
            <option value="26">Aventura Nueva 3</option>
        </select>
        <label for="number">Zadejte číslo poslechu</label>
        <input type="text" id="number" placeholder="1-2"/>
        <a href="#" class="disabled" role="button" id="out" target="_blank" rel="noopener noreferrer">Otevřít poslech</a>

        <p>Stránka pouze poskytuje odkazy na volně dostupné soubory</p>
    </main>
</Memories>

<style>
    main {
        padding: 10px;
        display: flex;
        flex-direction: column;
    }
    input, select, [role="button"] {
        padding: 3px;
        border: 1px solid;
        border-radius: 3px;
        border-color: inherit;
    }
    .disabled {
       filter: grayscale(1);
       pointer-events: none;
    }
    #out {
    background-color: #babdf5;
    border: none;
    border-radius: 4px;
    color: #222;
    padding: 8px 16px;
    font-size: 1rem;
    cursor: pointer;
    text-decoration: none;
    box-shadow: 0 2px 4px rgba(0,0,0,0.07);
    transition: background 0.2s, box-shadow 0.2s;
    display: inline-block;
    margin-top: 10px;
}
#out:hover:not(.disabled) {
    background-color: #a0a3e0;
    box-shadow: 0 4px 8px rgba(0,0,0,0.14);
    text-decoration: none;
}
</style>

<script>
const book = document.querySelector("#book");
const num = document.querySelector("#number");
const out = document.querySelector("#out");

function updateLink() {
    if (num.value && num.value.length > 0) {
        let n = num.value.replaceAll("-", "_");
        let b = book.value;
        out.href = "https://iklett.cz/books/" + b + "/" + n + ".mp3";
        out.classList.remove("disabled");
    } else {
        out.href = "#";
        out.classList.add("disabled");
    }
}
book.addEventListener("input", updateLink);
num.addEventListener("input", updateLink);
updateLink();
</script>