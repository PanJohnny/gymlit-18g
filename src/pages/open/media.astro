---
import {cookieOptions, validYear} from "../../utils"

const params = Astro.url.searchParams

if (!params.has("year") || !validYear(params.get("year"))) {
	return Astro.redirect('/select/year?redirect_reason=invalid.year')
}

Astro.cookies.set("last", Astro.url.href, cookieOptions)

return Astro.redirect(media[params.get("year")])
---