---
import media from "../../data/media.json";
import {canUseCookies, parseCookies, sendCookie} from "../../cookies.js"
import Redirect from "../../layouts/Redirect.astro";

const cookies = parseCookies(Astro.request.headers)

if (!cookies.has("class")) {
	return Astro.redirect("/select/year")
}

if (canUseCookies(Astro.request.headers))
	sendCookie("category", "media", 1, Astro.response.headers)

const redirect = media[cookies.get("class")]
return Astro.redirect(redirect)
---

<Redirect href={redirect}></Redirect>