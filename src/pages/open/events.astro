---
import {createExpires, validYear} from "../../utils"

const params = Astro.url.searchParams

if (!params.has("year") || !validYear(params.get("year"))) {
	return Astro.redirect('/select/year?redirect_reason=invalid.year')
}

Astro.cookies.set("last", Astro.url.href, {expires: createExpires(1)})

return Astro.redirect("/events/"+params.get("year"))
---